<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Be My Valentine üíò</title>
  <style>
    :root{
      --bg1:#ffb6c1;
      --bg2:#ffd1dc;
      --card:#ffffffcc;
      --ink:#2b2b2b;
      --accent:#ff3b7a;
      --accent2:#7c3aed;
      --shadow: 0 20px 60px rgba(0,0,0,.15);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      overflow:hidden;
      background:
        radial-gradient(1200px 700px at 20% 10%, #ffffff88 0%, transparent 60%),
        radial-gradient(1000px 700px at 80% 30%, #ffffff66 0%, transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* floating hearts background */
    .hearts{
      position:absolute; inset:0;
      pointer-events:none;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,.08));
      opacity:.9;
    }

    /* rain canvas */
    #rain{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity 600ms ease;
    }

    /* sad overlay */
    .sad-overlay{
      position:absolute; inset:0;
      background: radial-gradient(1200px 700px at 50% 30%, rgba(0,0,0,.35), rgba(0,0,0,.65));
      opacity:0;
      transition: opacity 600ms ease;
      pointer-events:none;
    }

    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      position:relative;
      width:min(720px, 92vw);
      padding:34px 28px 28px;
      border-radius:24px;
      background:var(--card);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      border: 1px solid #ffffffaa;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: linear-gradient(135deg, #fff, #fff0);
      border:1px solid #fff;
      box-shadow: 0 10px 30px rgba(255,59,122,.15);
      font-weight:600;
    }
    .badge .dot{
      width:10px;height:10px;border-radius:50%;
      background: linear-gradient(135deg, var(--accent), #ff9ad0);
      box-shadow:0 0 0 6px rgba(255,59,122,.12);
    }

    h1{
      margin:16px 0 10px;
      font-size: clamp(32px, 4.3vw, 56px);
      line-height:1.05;
      letter-spacing:-.02em;
    }

    .sub{
      margin: 0 0 22px;
      font-size: clamp(15px, 2.1vw, 18px);
      opacity:.85;
    }

    .buttons{
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 18px;
    }

    button{
      appearance:none;
      border:0;
      padding: 14px 18px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 16px;
      letter-spacing:.01em;
      cursor:pointer;
      transition: transform 120ms ease, box-shadow 200ms ease, background 200ms ease, filter 200ms ease;
      user-select:none;
    }
    button:active{transform: translateY(1px) scale(.99)}
    .yes{
      background: linear-gradient(135deg, var(--accent), #ff6aa6);
      color:white;
      box-shadow: 0 14px 40px rgba(255,59,122,.32);
    }
    .yes:hover{transform: translateY(-1px); filter: brightness(1.02)}
    .no{
      background: linear-gradient(135deg, #111827, #374151);
      color:#f9fafb;
      box-shadow: 0 14px 40px rgba(17,24,39,.25);
      position:relative;
    }
    .no:hover{transform: translateY(-1px);}

    .hint{
      margin-top: 18px;
      font-size: 13px;
      opacity:.7;
    }

    /* celebration modal */
    .modal{
      position:absolute; inset:0;
      display:grid;
      place-items:center;
      opacity:0;
      pointer-events:none;
      transition: opacity 250ms ease;
    }
    .modal.on{
      opacity:1;
      pointer-events:auto;
    }
    .modal .panel{
      width:min(720px, 92vw);
      border-radius:24px;
      padding:28px;
      background: rgba(255,255,255,.92);
      border:1px solid #fff;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      text-align:center;
    }
    .modal h2{
      margin:0 0 10px;
      font-size: clamp(28px, 3.5vw, 46px);
      letter-spacing:-.02em;
    }
    .modal p{margin:0 0 16px; opacity:.85; font-size: 16px;}
    .tiny{
      font-size:12px; opacity:.65;
    }

    /* confetti canvas */
    #confetti{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity 250ms ease;
    }
    #confetti.on{opacity:1;}

    /* make it a bit more ‚Äúcute‚Äù */
    .sparkle{
      position:absolute;
      right:22px; top:18px;
      font-size: 20px;
      opacity:.8;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,.08));
    }

    /* jumpscare overlay */
    .jumpscare{
      position:fixed;
      inset:0;
      z-index:9999;
      background:#0a0a0a;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      pointer-events:none;
      transition: none;
    }
    .jumpscare.on{
      opacity:1;
      pointer-events:auto;
      animation: jumpscareFlash 0.15s ease-out;
    }
    @keyframes jumpscareFlash{
      0%{ background:#1a0a0a; }
      30%{ background:#2a1515; }
      100%{ background:#0a0a0a; }
    }
    .jumpscare .sad-man{
      font-size: clamp(120px, 35vw, 280px);
      line-height:1;
      filter: drop-shadow(0 0 40px rgba(255,100,100,.3));
      animation: jumpscarePop 0.25s ease-out;
    }
    @keyframes jumpscarePop{
      0%{ transform: scale(0.3); opacity:0; }
      40%{ transform: scale(1.35); opacity:1; }
      70%{ transform: scale(0.95); }
      100%{ transform: scale(1); opacity:1; }
    }
  </style>
</head>
<body>
  <svg class="hearts" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
    <defs>
      <linearGradient id="hg" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#ff3b7a" stop-opacity=".35"/>
        <stop offset="1" stop-color="#7c3aed" stop-opacity=".25"/>
      </linearGradient>
    </defs>
    <!-- a few floating heart shapes -->
    <g fill="url(#hg)">
      <path d="M20 20 C20 13, 28 12, 30 18 C32 12, 40 13, 40 20 C40 28, 30 34, 30 34 C30 34, 20 28, 20 20Z" opacity=".7">
        <animateTransform attributeName="transform" type="translate" dur="10s" values="0 0; 0 -12; 0 0" repeatCount="indefinite"/>
      </path>
      <path d="M70 35 C70 28, 78 27, 80 33 C82 27, 90 28, 90 35 C90 43, 80 49, 80 49 C80 49, 70 43, 70 35Z" opacity=".6">
        <animateTransform attributeName="transform" type="translate" dur="12s" values="0 0; 0 -16; 0 0" repeatCount="indefinite"/>
      </path>
      <path d="M35 70 C35 63, 43 62, 45 68 C47 62, 55 63, 55 70 C55 78, 45 84, 45 84 C45 84, 35 78, 35 70Z" opacity=".55">
        <animateTransform attributeName="transform" type="translate" dur="11s" values="0 0; 0 -14; 0 0" repeatCount="indefinite"/>
      </path>
      <path d="M10 55 C10 48, 18 47, 20 53 C22 47, 30 48, 30 55 C30 63, 20 69, 20 69 C20 69, 10 63, 10 55Z" opacity=".45">
        <animateTransform attributeName="transform" type="translate" dur="9s" values="0 0; 0 -10; 0 0" repeatCount="indefinite"/>
      </path>
      <path d="M78 78 C78 71, 86 70, 88 76 C90 70, 98 71, 98 78 C98 86, 88 92, 88 92 C88 92, 78 86, 78 78Z" opacity=".4">
        <animateTransform attributeName="transform" type="translate" dur="13s" values="0 0; 0 -18; 0 0" repeatCount="indefinite"/>
      </path>
    </g>
  </svg>

  <canvas id="rain"></canvas>
  <div class="sad-overlay" id="sadOverlay"></div>

  <div class="jumpscare" id="jumpscare" aria-hidden="true">
    <div class="sad-man">&#128546;</div>
  </div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="sparkle">‚ú®üíò‚ú®</div>
      <div class="badge"><span class="dot"></span> A tiny question for you‚Ä¶</div>
      <h1>Will you be my valentine Brooklynn?</h1>
      <p class="sub">I promise: cute dates, extra snacks, and maximum appreciation üíñ</p>

      <div class="buttons">
        <button class="yes" id="yesBtn">Yes üíû</button>
        <button class="no" id="noBtn">No üò∂</button>
      </div>

      <div class="hint">Tip: hover the ‚ÄúNo‚Äù button (if you dare).</div>
    </div>

    <canvas id="confetti"></canvas>

    <div class="modal" id="modal">
      <div class="panel">
        <h2>yeahhhhhhhhhh!!! ü•πüíñ</h2>
        <p>You just made a young nigga very happy.</p>
        <p class="tiny">(Screenshot this for evidence üòå)</p>
        <div style="margin-top:18px">
          <button class="yes" id="resetBtn">Replay ‚ú®</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --------- Rain effect (canvas) ----------
    const rainCanvas = document.getElementById('rain');
    const rctx = rainCanvas.getContext('2d');
    let rainDrops = [];
    let raining = false;
    let rainRAF = 0;

    function resizeRain(){
      rainCanvas.width = window.innerWidth * devicePixelRatio;
      rainCanvas.height = window.innerHeight * devicePixelRatio;
      rctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resizeRain);
    resizeRain();

    function initRain(){
      rainDrops = [];
      const count = Math.floor(Math.min(700, window.innerWidth * 0.7));
      for(let i=0;i<count;i++){
        rainDrops.push({
          x: Math.random() * window.innerWidth,
          y: Math.random() * window.innerHeight,
          len: 10 + Math.random()*14,
          spd: 8 + Math.random()*10,
          w: 1 + Math.random()*1.2,
          a: 0.25 + Math.random()*0.35
        });
      }
    }
    initRain();

    function drawRain(){
      rctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      rctx.lineCap = "round";

      for(const d of rainDrops){
        rctx.beginPath();
        rctx.lineWidth = d.w;
        rctx.strokeStyle = `rgba(210, 230, 255, ${d.a})`;
        rctx.moveTo(d.x, d.y);
        rctx.lineTo(d.x + 2, d.y + d.len);
        rctx.stroke();

        d.y += d.spd;
        d.x += 0.4; // tiny wind
        if(d.y > window.innerHeight + 20){
          d.y = -20;
          d.x = Math.random() * window.innerWidth;
        }
        if(d.x > window.innerWidth + 20){
          d.x = -20;
        }
      }

      if(raining) rainRAF = requestAnimationFrame(drawRain);
    }

    function startRain(){
      if(raining) return;
      raining = true;
      document.getElementById('rain').style.opacity = 1;
      drawRain();
    }

    function stopRain(){
      raining = false;
      document.getElementById('rain').style.opacity = 0;
      cancelAnimationFrame(rainRAF);
      rctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    }

    // --------- Sad music (WebAudio; no external files) ----------
    let audioCtx = null;
    let sadGain = null;
    let sadNodes = [];

    function startSadMusic(){
      // Note: browsers only allow audio after a user gesture.
      // Hover counts in many browsers, but to be safe we also resume on any click.
      if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        sadGain = audioCtx.createGain();
        sadGain.gain.value = 0.0;
        sadGain.connect(audioCtx.destination);

        // A soft, ‚Äúsad‚Äù pad: minor chord + slow wobble.
        // Frequencies roughly around A minor (A, C, E) + a low bass.
        const freqs = [110, 220, 261.63, 329.63];
        for(const f of freqs){
          const osc = audioCtx.createOscillator();
          osc.type = "sine";
          osc.frequency.value = f;

          const lfo = audioCtx.createOscillator();
          lfo.type = "sine";
          lfo.frequency.value = 0.18 + Math.random()*0.12; // gentle wobble

          const lfoGain = audioCtx.createGain();
          lfoGain.gain.value = 3.0; // vibrato depth

          lfo.connect(lfoGain);
          lfoGain.connect(osc.frequency);

          const g = audioCtx.createGain();
          g.gain.value = 0.0;

          osc.connect(g);
          g.connect(sadGain);

          osc.start();
          lfo.start();

          sadNodes.push({osc, lfo, g});
        }

        // Add a quiet ‚Äúrainy‚Äù noise texture
        const bufferSize = 2 * audioCtx.sampleRate;
        const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
        const output = noiseBuffer.getChannelData(0);
        for (let i = 0; i < bufferSize; i++) output[i] = (Math.random() * 2 - 1) * 0.25;

        const noise = audioCtx.createBufferSource();
        noise.buffer = noiseBuffer;
        noise.loop = true;

        const noiseFilter = audioCtx.createBiquadFilter();
        noiseFilter.type = "lowpass";
        noiseFilter.frequency.value = 900;

        const noiseGain = audioCtx.createGain();
        noiseGain.gain.value = 0.0;

        noise.connect(noiseFilter);
        noiseFilter.connect(noiseGain);
        noiseGain.connect(sadGain);
        noise.start();

        sadNodes.push({noise, noiseGain});
      }

      audioCtx.resume?.();

      // fade in
      const now = audioCtx.currentTime;
      sadGain.gain.cancelScheduledValues(now);
      sadGain.gain.setValueAtTime(sadGain.gain.value, now);
      sadGain.gain.linearRampToValueAtTime(0.18, now + 0.6);

      for(const n of sadNodes){
        if(n.g){
          n.g.gain.cancelScheduledValues(now);
          n.g.gain.setValueAtTime(n.g.gain.value, now);
          n.g.gain.linearRampToValueAtTime(0.25, now + 0.8);
        }
        if(n.noiseGain){
          n.noiseGain.gain.cancelScheduledValues(now);
          n.noiseGain.gain.setValueAtTime(n.noiseGain.gain.value, now);
          n.noiseGain.gain.linearRampToValueAtTime(0.10, now + 0.8);
        }
      }
    }

    function stopSadMusic(){
      if(!audioCtx || !sadGain) return;
      const now = audioCtx.currentTime;
      sadGain.gain.cancelScheduledValues(now);
      sadGain.gain.setValueAtTime(sadGain.gain.value, now);
      sadGain.gain.linearRampToValueAtTime(0.0, now + 0.4);

      for(const n of sadNodes){
        if(n.g){
          n.g.gain.cancelScheduledValues(now);
          n.g.gain.setValueAtTime(n.g.gain.value, now);
          n.g.gain.linearRampToValueAtTime(0.0, now + 0.4);
        }
        if(n.noiseGain){
          n.noiseGain.gain.cancelScheduledValues(now);
          n.noiseGain.gain.setValueAtTime(n.noiseGain.gain.value, now);
          n.noiseGain.gain.linearRampToValueAtTime(0.0, now + 0.4);
        }
      }
    }

    // --------- Confetti (canvas) ----------
    const confettiCanvas = document.getElementById('confetti');
    const cctx = confettiCanvas.getContext('2d');
    let confetti = [];
    let confettiRAF = 0;
    let confettiOn = false;

    function resizeConfetti(){
      confettiCanvas.width = window.innerWidth * devicePixelRatio;
      confettiCanvas.height = window.innerHeight * devicePixelRatio;
      cctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resizeConfetti);
    resizeConfetti();

    function launchConfetti(){
      confettiOn = true;
      confettiCanvas.classList.add('on');
      confetti = [];
      const n = 240;
      for(let i=0;i<n;i++){
        confetti.push({
          x: window.innerWidth/2 + (Math.random()*120-60),
          y: window.innerHeight/2 + (Math.random()*40-20),
          vx: (Math.random()*8-4),
          vy: (-8 - Math.random()*8),
          r: 3 + Math.random()*5,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*0.3 - 0.15),
          g: 0.24 + Math.random()*0.10
        });
      }
      drawConfetti();
    }

    function drawConfetti(){
      cctx.clearRect(0,0,window.innerWidth, window.innerHeight);

      for(const p of confetti){
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        // Use simple shapes + alpha; keep it lightweight (no fixed colors requested)
        cctx.save();
        cctx.translate(p.x, p.y);
        cctx.rotate(p.rot);
        cctx.globalAlpha = 0.9;
        cctx.fillStyle = `hsl(${(p.x + p.y) % 360}, 90%, 70%)`;
        cctx.fillRect(-p.r, -p.r/2, p.r*2, p.r);
        cctx.restore();
      }

      confetti = confetti.filter(p => p.y < window.innerHeight + 40);

      if(confettiOn && confetti.length){
        confettiRAF = requestAnimationFrame(drawConfetti);
      }else{
        confettiOn = false;
        confettiCanvas.classList.remove('on');
        cctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      }
    }

    // --------- UI behavior ----------
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const sadOverlay = document.getElementById('sadOverlay');
    const modal = document.getElementById('modal');
    const resetBtn = document.getElementById('resetBtn');
    const jumpscareEl = document.getElementById('jumpscare');

    let sadMode = false;

    function enterSadMode(){
      if(sadMode) return;
      sadMode = true;
      sadOverlay.style.opacity = 1;
      startRain();
      startSadMusic();
    }
    function exitSadMode(){
      if(!sadMode) return;
      sadMode = false;
      sadOverlay.style.opacity = 0;
      stopRain();
      stopSadMusic();
    }

    // Hover No => rain + sad music
    noBtn.addEventListener('mouseenter', enterSadMode);
    noBtn.addEventListener('mouseleave', exitSadMode);

    // Some browsers require a click to allow audio
    window.addEventListener('pointerdown', () => {
      if(audioCtx) audioCtx.resume?.();
    });

    // Clicking No: playful ‚Äúare you sure?‚Äù and keep sad mode
    noBtn.addEventListener('click', () => {
      enterSadMode();
      jumpscareEl.classList.add('on');
      setTimeout(() => jumpscareEl.classList.remove('on'), 1800);
      noBtn.textContent = "‚Ä¶Really? üò≠";
      setTimeout(() => (noBtn.textContent = "No üò∂"), 1400);
    });

    // Yes => celebration
    yesBtn.addEventListener('click', () => {
      exitSadMode();
      modal.classList.add('on');
      launchConfetti();
    });

    resetBtn.addEventListener('click', () => {
      modal.classList.remove('on');
      exitSadMode();
    });
  </script>
</body>
</html>
